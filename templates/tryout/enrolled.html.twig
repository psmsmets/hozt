{% extends 'default.html.twig' %}

{% block title %}Testmomenten{% endblock %}

{% block main %}

  <div class="p-3 mb-4 bg-white shadow-sm">

    <h1 class="text-red">Testmomenten</h1>

    {% if page.tryouts|length > 0 %}

      <ul class="list-group list-group-flush mt-3">
      {% for tryout in page.tryouts %}
        <li class="list-group-item pl-0 pl-md-3 pr-0 pr-md-3">
          <div class="d-flex w-100 justify-content-between align-items-center">
            <h5 class="mb-1">{{ tryout.startTime|localizeddate('full','none') }}<br> van {{ tryout.startTime|localizeddate('none','short') }} tot {{ tryout.endTime|localizeddate('none','short') }}</h5>
            <span class="pl-1 text-right">
              {% if tryout.enrolFrom > date() %}
                <small class="text-muted">inschrijven vanaf {{ tryout.enrolFrom|localizeddate('medium','none')}}</small>
              {% else %}
                <small>beschikbare plaatsen:</small> <span class="badge badge-hozt badge-pill">{{ tryout.remainingEnrolments }}</span><br>
                <small>inschrijven tot {{ tryout.enrolUntil|localizeddate('medium','short')}}</small>
              {% endif %}
            </span>
          </div>
          {% if tryout.enrolments|length>0%}
          <div class="table-responsive">
            <table class="table table-sm table-borderless table-hover mt-2">
              <caption>Inschrijvingen</caption>
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Voornaam</th>
                  <th scope="col">Naam</th>
                  <th scope="col">Geboortjaar</th>
                  <th scope="col">Postcode</th>
                  <th scope="col">Groep</th>
                  <th scope="col">Ingeschreven</th>
                  <th scope="col">Afgemeld</th>
                </tr>
              </thead>
              <tbody>
                {% set i=0 %}
                {% for enrol in tryout.enrolments|sortbyfield('lastname')|reverse %}
                <tr class="{%if enrol.withdrawn %}line-through text-muted{%endif%}">
                  <th>{% if not enrol.withdrawn %}{% set i = i + 1 %}{{i}}{% endif %}</th>
                  <td>{{enrol.firstname|ucfirst}}</td>
                  <td>{{enrol.lastname|ucfirst}}</td>
                  <td>{{enrol.birthdate|date('Y')}}</td>
                  <td>{{enrol.address}}</td>
                  <td>{{enrol.category}}</td>
                  <td class="small">{{enrol.enrolledAt|localizeddate('short','short')}}</td>
                  <td class="small">
                    {% if enrol.withdrawn %} {{enrol.withdrawnAt|localizeddate('short','short')}} {% endif %}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% endif %}
        </li>
      {% endfor %}
      </ul>

    {% endif %}

  </div>


{% endblock %}
